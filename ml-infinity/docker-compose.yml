services:
  ml-infinity:
    container_name: ml-infinity
    image: refracta/ml-infinity
    volumes:
      - /home/refracta:/home/refracta
      - /mnt/ext_sdb:/mnt/ext_sdb
      - /root/.cache/huggingface:/mnt/ext_sdb/models/Infinity/.cache/huggingface
    working_dir: /usr/src/
    privileged: true
    ipc: host
#    network_mode: host
    restart: unless-stopped

    deploy:
      resources:
        reservations:
          devices:
            - capabilities: [gpu]
    ports:
      - "22"